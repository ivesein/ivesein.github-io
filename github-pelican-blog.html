<!DOCTYPE html>
<html lang="zh">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="./theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="./theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Ivesein">
  <meta name="description" content="Posts and writings by Ivesein">

  <link href="http://ivesein.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ivesein-Blogs Atom" />

<meta name="keywords" content="pelican, python, blog">

  <title>
    Ivesein-Blogs
&ndash; Github+Pelican搭建博客教程  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href=".">
        <img src="/images/my_logo.png" alt="logo">
      </a>
      <h2><a href=".">Ivesein</a></h2>
      <p>C/C++  PYTHON  GIT/GITHUB.  Work @Linux</p>
      <ul>
        <li><a href="./pages/guan-yu-wo.html">关于我</a></li>
        <li><a href="./pages/wo-de-xiang-mu.html">我的项目</a></li>
	<li><a href="mailto:ivesein@outlook.com" target="_blank">EMAIL</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href=".">Index</a> &brvbar; <a href="./archives.html">Archives</a>
      &brvbar; <a href="http://ivesein.github.io/feeds/all.atom.xml">Atom</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="./github-pelican-blog.html">Github+Pelican搭建博客教程</a></h1>
  </div>
  <div class="article_text">
    <h3>操作系统：Linux/ubuntu</h3>
<h4>使用工具：</h4>
<ol>
<li>
<p>Github Pages——Github为每位注册用户提供300M的站点空间。</p>
</li>
<li>
<p>Pelican——基于Python的静态网页生成器。</p>
</li>
<li>
<p>Python——pelican工具需要Python运行环境。</p>
</li>
<li>
<p>Markdown——Markdown文本编辑器。</p>
</li>
<li>
<p>其他——个人申请的域名、Google Analytics(谷歌站点数据检测分析工具)、Disqus(提供博客评论功能)、DNSPod(提供免费域名解析注册服务)等。</p>
</li>
</ol>
<p>##### 最终效果：欢迎访问我的个人博客：http://ivesein.github.io/</p>
<h4>一 、使用Github Pages创建个人博客页面</h4>
<p>Git是一个开源的分布式版本控制系统，用以有效、高速的处理从很小到非常大的项目版本管理。GitHub可以托管各种git库的站点。通过GitHub Pages生成的静态站点，可以免费托管、自定义主题、并且自制网页界面。</p>
<ol>
<li>
<p>首先注册Github账户：http://github.com/。</p>
</li>
<li>
<p>登录Github账户，点击“Create a new repo”创建库名为*username.github.io*的新仓库。<em>这里的username要替换为你自己的用户名</em></p>
</li>
<li>
<p>创建SSH密钥并上传到Github：</p>
</li>
<li>
<p>在终端输入：<code>ssh -keygen</code>一路回车，完成后将.pub文件中的内容粘贴到github账户设置页面的ssh-key中。</p>
</li>
<li>
<p>在终端输入：<code>ssh -T  git@github.com</code>验证是否成功。 </p>
</li>
<li>
<p>设置好后就可上传你的blog项目到该仓库生成网页用来展示了。</p>
</li>
</ol>
<p>*以上内容都很简单，有问题可以参考Github官方帮助文档：</p>
<p>​    帮助文档：<a href="https://help.github.com/articles/connecting-to-github-with-ssh/">Github官方帮助文档</a></p>
<h4>二 、 安装Python、Pelican 和Markdown</h4>
<p>Pelican是一套开源的使用Python编写的博客静态生成工具, 可以添加文章和和创建页面, 可以使用MarkDown reStructuredText 和 AsiiDoc 的格式来抒写, 同时使用 Disqus评论系统, 支持 RSS和Atom输出, 插件, 主题, 代码高亮等功能, 采用Jajin2模板引擎, 可以很容易的更改模板。</p>
<ol>
<li>
<p>安装Python：Linux/ubuntu系统一般自带Python。在终端输入：<code>python -V</code>来查看当前Python版本信息。如果需要可以到官网安装：http://www.python.org/</p>
</li>
<li>
<p>安装Pelican：有两种方法来安装，如果安装了pip则可以在终端输入：<code>pip install pelican</code>来安装；或者从github克隆最新代码安装。建议在virtualenv下使用。</p>
</li>
<li>
<p>首先建立 virtualenv（Python虚拟环境）</p>
<p><code>virtualenv  pelican                #创建pelican虚拟环境
    cd pelican
    sh bin/activate                    #激活虚拟环境</code></p>
</li>
<li>
<p>从github克隆最新代码安装Pelican</p>
<p><code>python
 git clone git://github.com/getpelican/pelican.git
 cd pelican
 python setup.py install</code></p>
</li>
<li>
<p>安装Markdown</p>
</li>
</ol>
<p><code>python
   pip install markdown</code></p>
<h4>三 、 创建博客骨架</h4>
<p>接下来将通过初始化Pelican设置来生成一个基本的博客框架。</p>
<ol>
<li>创建blog项目目录：</li>
</ol>
<p><code>mkdir blogs
   cd blogs
   pelican-quickstart</code></p>
<ol>
<li>根据提示一步步输入相应的配置项，不知道如何设置可以直接默认即可，后续可以通过编辑peilicanconf.py文件进行配置更改。完成后会在根目录生成以下文件：</li>
</ol>
<p><code>.
   |-- content                # 所有博客文章放于此目录
   │   └── (pages)            # 存放手动创建的静态页面
   |-- develop_server.sh      # 用于开启测试服务器
   |-- Makefile               # 方便管理博客的Makefile
   |-- output                 # 静态生成文件
   |-- pelicanconf.py         # 配置文件
   |-- publishconf.py         # 配置文件</code></p>
<ol>
<li>更改Makefile文件，设置一键上传部署到Github，打开根目录下的Makefile文件，更改以下部分：</li>
</ol>
<p><code>github: publish
           cd ./output ; git init ; git remote add origin                   git@github.com:username/username.github.io ; git add . ;         git commit -m 'my comments' ; git push origin +master  
   #这段命令的意思是：进入output文件夹，初始化仓库，添加本地仓库origin到远程  仓库，此处的username均要替换为你自己的github用户名</code></p>
<ol>
<li>以后每次写完文章就可以通过在blogs项目根目录下执行<code>make github</code>进行一键部署发布到github了。在http://username.github.io查看效果。</li>
</ol>
<h4>四 、使用Markdown写测试博客并上传到github发布</h4>
<p>Markdown是当下非常流行的一种文本编辑语法，支持HTML转换，书写博文排版也方便快捷。</p>
<ol>
<li>写一篇测试文章：用markdown语法写一篇测试文章保存为.md格式存放在content文件夹下。完成后执行以下命令，即可在浏览器输入<code>localhust：8000</code>查看效果：</li>
</ol>
<p><code>make publish
   make serve</code></p>
<ol>
<li>创建一个页面：这里以创建About页面为例。在content目录下创建pages子文件夹：</li>
</ol>
<p><code>mkdir content/pages</code></p>
<p>然后创建About.md并编辑以下内容：</p>
<p>```
   title： About Me
   date： 2017-02-10</p>
<p>Hello everyone！ I'm ivesein～
   ```</p>
<p>*注意上面的title和date是.md文件的重要参数，需要卸载文档开头。比如</p>
<p><code>Title: Pelican+Github
   Date: 2017-02-10 10:20
   Modified: 2017-02-10 10:30
   Tags: python, pelican
   Slug: build-blog-system-by-pelican
   Authors: Ivesein
   Summary: hahahah...
   Status: draft     #用于预览时使用，正式发布时应删除</code></p>
<p>*相关介绍请参见Pelican官方开发文档：http://pelican-zh.readthedocs.org/en/latest/zh-cn/。完成后同样可以在浏览器本地8000端口查看效果。</p>
<ol>
<li>创建导航目录项：Menu Item设置。在你的博客中，可以设置相应的菜单项，才当项是通过pelicanconf.py设置的，具体如下所示：</li>
</ol>
<p><code>MENUITEMS = (("ITEM1","http://github.com"),
                ("ITEM2",URL),
               ......)</code></p>
<h4>五 、 安装主题</h4>
<p>Pelican支持大量的开源主题，GitHub上的 pelican-themes 项目有几十套主题，大部分都带了效果预览图。可以从里面挑一个你喜欢的主题样式来使用。还有一个更方便的挑选主题的方式，直接打开 www.pelicanthemes.com 挑选吧。一个网页里就列出了几乎所有的主题。我的博客是使用 foundation-default-colours 主题，并在这套主题的基础上进行了一些定制。选定好喜欢的主题后，从GitHub上下载下来所有的主题： </p>
<div class="highlight"><pre><span></span>mkdir ~/pelican
cd ~/pelican
git clone https://github.com/getpelican/pelican-themes.git
</pre></div>


<p>从里面拷贝一份你选中的主题到项目根目录的 themes 目录下，在本文的例子中是 ~/lab/blogs/themes 。然后在 pelicanconf.py 和 publishconf.py 里通过下面代码指定博客主题： </p>
<p><code>THEME = "themes/foundation-default-colours"</code></p>
<p>通常的做法是，选中一个自己喜欢的主题后，会进行一些定制。Pelican使用 Jinja2 来配置主题。一个主题的典型结构如下：</p>
<div class="highlight"><pre><span></span>├── static
│   ├── css
│   └── images
└── templates
    ├── analytics_cnzz.html # 这个是我添加的使用cnzz的统计服务的代码
    ├── analytics.html      # 这是Google Analytics的代码
    ├── archives.html       # 这个是博客归档页面的模板
    ├── article.html        # 这个是博客正文的显示模板
    ├── base.html           # 这个是所有页面的父类模板，即所有页面都引用这个页面。比如网页导航栏啊之                               类的，都定义在这里
    ├── categories.html     # 所有博客文章的分类列表
    ├── category.html       # 某个博客分类的文章列表模板
    ├── index.html          # 主页
    ├── page.html           # 分页显示的模板
    ├── tag.html            # 某类标签下的文章列表
    └── tags.html           # 所有的标签列表页面模板
</pre></div>


<p>稍微有点Jinja的知识加上一些HTML和CSS的知识，就可以自己定义主题了。</p>
<p>为什么博客主页打开半天都不显示出来？因为GFW封锁了几乎所有和Google相关的网站，这些主题里又用了Google的字体，所以下载这些字体时会导致无法下载成功而半天不显示网页。解决方案很简单，直接修改css文件，不去下载Google字体即可。比如针对 foundation-default-colours 主题，打开主题根目录下的 static/css/foundation.css 和 static/css/foundation.min.css 文件，删除掉 @import url("//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,700"); 内容即可。当然，如果你和你的读者都是翻墙高手，那就不会遇到这个问题了。</p>
<h4>六 、安装第三方评论系统Disqus</h4>
<p>在Disqus上申请一个站点，记住shortname。 在pelicanconf.py添加：</p>
<p><code>DISQUS_SITENAME = shortname</code></p>
<h4>七 、添加Google Analytics</h4>
<p>去Google Analytics申请账号并通过验证，记下跟踪ID（Track ID）， 在pelicanconf.py添加：</p>
<p><code>GOOGLE_ANALYTICS = '跟踪ID'</code></p>
  </div>
  <div class="article_meta">
    <p>Posted on: 2017-02-10(五)</p>
    <p>Category: <a href="./category/python.html">Python</a>
 &ndash; Tags:
      <a href="./tag/pelican.html">pelican</a>,      <a href="./tag/python.html">python</a>,      <a href="./tag/blog.html">blog</a>    </p>
  </div>


</article>


    <div id="ending_message">
      <p>&copy; Ivesein. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>